<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Mapfeel</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  </head>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- <script src="/src/map.js"></script> -->
  <!-- <script src="/src/main.js"></script> -->
  
  <body>
    <div id="app">
      <div id="map" style="width:400px; height:400px;"></div>
    </div>
    <!-- <script type="module" src="/src/main.js"></script> -->
    <div id="div">
      <ul id="poilist">
      </ul>
    </div>
    <!-- <script src="/src/main.js"></script> -->
    <script type="module">
      import { initMap } from "/src/map.js"
      // import { main } from "/src/main.js"

      console.log('地図表示')
      initMap();

      console.log('プロジェクト名取得')
      var project = location.pathname.replace(/^\//, "");
      if (!project) {
	  alert("URLにプロジェクト名を指定してください");
	  // return;
      }

      console.log('データ取得')
      //var data = await main(project);
      var data = await getData(project);

      // console.log(data[0]);

      for(var i=0;i<data.length;i++){
	  var li = $('<li>')
	  li.text(data[i].title)
	  $('#poilist').append(li)
      }

    </script>
  </body>
</html>
